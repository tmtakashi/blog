---
title: WAVファイルの構造&C言語での読み書き
date: 2020-04-27T11:10:20.161Z
description: wavファイルについて
---
## WAVファイルの内容について

WAV ファイルは RIFF チャンクと呼ばれるブロック構造によって記述されています。 この RIFF チャンクの中には「fmt チャンク」と「data チャンク」が含まれており、前者は標本化周波数、量子化ビット数などのファイルのプロパティ情報、後者は音の波形データそのものが格納されています。

### RIFFチャンクの先頭

| パラメータ     | バイト数 | 内容         |
| --------- | ---- | ---------- |
| chunkID   | 4    | "RIFF"     |
| chunkSize | 4    | サンプル数 + 16 |
| formType  | 4    | "WAVE"     |

### fmtチャンク

| パラメータ          | バイト数 | 内容                                                                 |
| -------------- | ---- | ------------------------------------------------------------------ |
| chunkID        | 4    | "fmt "                                                             |
| chunkSize      | 4    | 16                                                                 |
| waveFormatType | 2    | 音データの形式。PCMの場合1                                                    |
| channel        | 2    | モノラルの場合1、ステレオの場合2                                                  |
| samplesPerSec  | 4    | 標本化周波数                                                             |
| bytesPerSec    | 4    | 1秒間の音データを記録するのに必要なデータ量(byte)。blockSize * samplesPerSec             |
| blockSize      | 2    | (byte / sample)  *channel。 16bitステレオの場合 2 \[byte / sample]*  2 = 4 |
| bitsPerSample  | 2    | bitを単位とする量子化精度。8bitの場合は8, 16bitの場合は16                              |

### dataチャンク

| パラメータ     | バイト数             | 内容     |
| --------- | ---------------- | ------ |
| chunkID   | 4                | "fmt " |
| chunkSize | 4                | サンプル数  |
| data      | (1 or 2) * サンプル数 | 音データ   |

dataパラメータには、量子化ビット数が8bitの場合最小値が0、オフセットが128、最大値が256の音データが記録され、 量子化ビット数が16bitの場合最小値が-32768、オフセットが0、最大値が32767の音データが記録されます。

モノラルの場合は時間が進むにつれて音データが順番に記録されていきます。 ステレオの場合は左チャンネルのデータと右チャンネルのデータが交互に記録されていきます。

![](/img/wave_block.svg)